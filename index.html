<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Learning Helper - Enhanced</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 3.5rem;
            color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #ffd700;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .card-container {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            width: 100%;
            max-width: 550px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }
        
        .card-header {
            background: linear-gradient(to right, #2c3e50, #4a6491);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .card-header h2 {
            font-size: 2rem;
        }
        
        .card-body {
            padding: 25px;
        }
        
        .section {
            margin-bottom: 25px;
        }
        
        .section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #4a6491;
        }
        
        .step {
            display: flex;
            margin-bottom: 20px;
            padding-left: 10px;
        }
        
        .step-number {
            background: #4a6491;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
            font-weight: bold;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-content h4 {
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .step-content p {
            color: #555;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(to right, #4a6491, #2c3e50);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 10px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
        }
        
        .btn:hover {
            background: linear-gradient(to right, #2c3e50, #4a6491);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .tool-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.2s ease;
        }
        
        .tool-item:hover {
            background: #e9ecef;
            transform: translateY(-3px);
        }
        
        .tool-item h4 {
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .code-block {
            background: #f8f9fa;
            border-left: 4px solid #4a6491;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        
        .tip-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .tip-box strong {
            color: #856404;
        }
        
        .warning-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .warning-box strong {
            color: #721c24;
        }
        
        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .success-box strong {
            color: #155724;
        }
        
        .sql-playground {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            padding: 30px;
            margin: 30px auto;
            max-width: 1200px;
        }
        
        .sql-playground h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .playground-section {
            margin-bottom: 25px;
        }
        
        .playground-section h3 {
            color: #4a6491;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #4a6491;
        }
        
        #sqlInput {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            border: 2px solid #4a6491;
            border-radius: 8px;
            resize: vertical;
            background: #f8f9fa;
        }
        
        #executeBtn {
            margin-top: 15px;
        }
        
        .query-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .example-query {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            border: 1px solid #1976d2;
        }
        
        .example-query:hover {
            background: #bbdefb;
            transform: translateY(-2px);
        }
        
        #resultContainer {
            margin-top: 20px;
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .result-table th {
            background: linear-gradient(to right, #2c3e50, #4a6491);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        .result-table td {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .result-table tr:hover {
            background: #f5f5f5;
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #dc3545;
            margin-top: 15px;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            margin-top: 15px;
        }
        
        .db-info {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin-bottom: 20px;
        }
        
        .upload-section {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 2px dashed #1976d2;
        }
        
        .upload-section h3 {
            color: #0d47a1;
            margin-bottom: 15px;
        }
        
        .file-input-wrapper {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            margin-top: 15px;
        }
        
        .file-input-label {
            background: linear-gradient(to right, #4a6491, #2c3e50);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .file-input-label:hover {
            background: linear-gradient(to right, #2c3e50, #4a6491);
            transform: scale(1.05);
        }
        
        input[type="file"] {
            display: none;
        }
        
        .file-name {
            color: #2c3e50;
            font-weight: bold;
        }
        
        .table-name-input {
            padding: 10px;
            border: 2px solid #4a6491;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .reset-btn {
            background: #dc3545;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .reset-btn:hover {
            background: #c82333;
            transform: scale(1.05);
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 30px 0;
            margin-top: 40px;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .card {
                max-width: 100%;
            }
            
            .tools-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>SQL Learning Helper</h1>
            <p class="subtitle">Your complete roadmap from zero to SQL hero - Installation, fundamentals, and best practices</p>
            <div style="margin-top: 25px;">
                <a href="sql-deep-dive.html" class="btn" style="font-size: 1.2rem; padding: 15px 35px;">🚀 Jump to Advanced SQL Concepts</a>
            </div>
        </header>
        
        <!-- SQL Playground -->
        <div class="sql-playground">
            <h2>🎮 Interactive SQL Playground</h2>
            
            <div class="upload-section">
                <h3>📤 Upload Your Own Database</h3>
                <p style="margin-bottom: 15px; color: #555;">Load your own data to practice with real datasets!</p>
                
                <div class="file-input-wrapper">
                    <label class="file-input-label" for="dbFileInput">
                        📁 Upload .db (SQLite)
                        <input type="file" id="dbFileInput" accept=".db,.sqlite,.sqlite3" onchange="handleDBUpload(event)">
                    </label>
                    
                    <label class="file-input-label" for="csvFileInput">
                        📊 Upload .csv
                        <input type="file" id="csvFileInput" accept=".csv" onchange="handleCSVUpload(event)">
                    </label>
                    
                    <input type="text" id="csvTableName" class="table-name-input" placeholder="Table name for CSV" value="csv_data">
                    
                    <button class="reset-btn" onclick="resetToSampleDB()">🔄 Reset to Sample DB</button>
                </div>
                
                <div id="uploadStatus" style="margin-top: 15px;"></div>
            </div>
            
            <div class="db-info" id="dbInfo">
                <strong>📊 Sample Database Loaded!</strong><br>
                Table: <code>employees</code><br>
                Columns: id, name, department, position, salary, hire_date<br>
                Records: 20 sample employees
            </div>
            
            <div class="playground-section">
                <h3>Database Tables:</h3>
                <button class="btn" onclick="showTables()" style="padding: 8px 20px; font-size: 0.9rem; margin-bottom: 15px;">📋 Show All Tables</button>
            </div>
            
            <div class="playground-section">
                <h3>Try These Example Queries:</h3>
                <div class="query-examples">
                    <div class="example-query" onclick="loadQuery('SELECT * FROM employees LIMIT 5;')">
                        📋 View first 5 employees
                    </div>
                    <div class="example-query" onclick="loadQuery('SELECT department, COUNT(*) as count FROM employees GROUP BY department;')">
                        📊 Count by department
                    </div>
                    <div class="example-query" onclick="loadQuery('SELECT name, salary FROM employees WHERE salary > 60000 ORDER BY salary DESC;')">
                        💰 High earners (>60k)
                    </div>
                    <div class="example-query" onclick="loadQuery('SELECT department, AVG(salary) as avg_salary FROM employees GROUP BY department;')">
                        📈 Average salary by dept
                    </div>
                    <div class="example-query" onclick="loadQuery('SELECT * FROM employees WHERE hire_date >= \'2020-01-01\';')">
                        🆕 Hired since 2020
                    </div>
                    <div class="example-query" onclick="loadQuery('SELECT position, MAX(salary) as max_salary, MIN(salary) as min_salary FROM employees GROUP BY position;')">
                        💵 Salary range by position
                    </div>
                </div>
            </div>
            
            <div class="playground-section">
                <h3>Write Your SQL Query:</h3>
                <textarea id="sqlInput" placeholder="Type your SQL query here... e.g., SELECT * FROM employees;"></textarea>
                <button id="executeBtn" class="btn" onclick="executeSQL()">▶️ Execute Query</button>
            </div>
            
            <div id="resultContainer"></div>
        </div>
        
        <div class="card-container">
            <!-- Section 1: Getting Started -->
            <div class="card">
                <div class="card-header">
                    <h2>🚀 Getting Started with SQL</h2>
                </div>
                <div class="card-body">
                    <div class="section">
                        <h3>What is SQL?</h3>
                        <p>SQL (Structured Query Language) is the standard language for managing and manipulating relational databases. It's used by millions of developers and data analysts worldwide to create, read, update, and delete data efficiently.</p>
                        <div class="success-box">
                            <strong>Why Learn SQL?</strong> SQL is consistently one of the most in-demand tech skills. It's used in data science, web development, business analytics, and virtually every industry that works with data.
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Installation Guide</h3>
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Choose a Database System</h4>
                                <p>Select based on your needs and skill level:</p>
                                <div class="tools-grid">
                                    <div class="tool-item">
                                        <h4>SQLite</h4>
                                        <p>✅ Best for beginners - No server needed!</p>
                                    </div>
                                    <div class="tool-item">
                                        <h4>MySQL</h4>
                                        <p>Most popular for web applications</p>
                                    </div>
                                    <div class="tool-item">
                                        <h4>PostgreSQL</h4>
                                        <p>Advanced features, great for complex queries</p>
                                    </div>
                                    <div class="tool-item">
                                        <h4>SQL Server</h4>
                                        <p>Enterprise-grade by Microsoft</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Install Your Chosen Database</h4>
                                <p><strong>Recommended for Beginners: SQLite</strong></p>
                                <div class="code-block">
                                    # SQLite comes pre-installed with Python<br>
                                    python --version  # Check if Python is installed<br><br>
                                    
                                    # Or download standalone SQLite<br>
                                    # Visit: sqlite.org/download.html<br>
                                    # Extract and add to PATH
                                </div>
                                <p><strong>For MySQL:</strong></p>
                                <div class="code-block">
                                    # Windows: Download MySQL Installer from mysql.com<br>
                                    # Mac: brew install mysql<br>
                                    # Linux: sudo apt-get install mysql-server
                                </div>
                                <p><strong>For PostgreSQL:</strong></p>
                                <div class="code-block">
                                    # Windows/Mac: Download from postgresql.org<br>
                                    # Mac: brew install postgresql<br>
                                    # Linux: sudo apt-get install postgresql
                                </div>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Install a Database Client/IDE</h4>
                                <p>Visual tools make learning SQL much easier:</p>
                                <div class="tools-grid">
                                    <div class="tool-item">
                                        <h4>DB Browser</h4>
                                        <p>Free SQLite GUI - Perfect start!</p>
                                    </div>
                                    <div class="tool-item">
                                        <h4>DBeaver</h4>
                                        <p>Universal tool for all databases</p>
                                    </div>
                                    <div class="tool-item">
                                        <h4>MySQL Workbench</h4>
                                        <p>Official MySQL tool with visual design</p>
                                    </div>
                                    <div class="tool-item">
                                        <h4>pgAdmin</h4>
                                        <p>PostgreSQL admin interface</p>
                                    </div>
                                    <div class="tool-item">
                                        <h4>DataGrip</h4>
                                        <p>JetBrains IDE (paid, powerful)</p>
                                    </div>
                                    <div class="tool-item">
                                        <h4>Azure Data Studio</h4>
                                        <p>Cross-platform SQL editor</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Verify Installation</h4>
                                <div class="code-block">
                                    # For SQLite<br>
                                    sqlite3 --version<br><br>
                                    
                                    # For MySQL<br>
                                    mysql --version<br><br>
                                    
                                    # For PostgreSQL<br>
                                    psql --version
                                </div>
                                <div class="success-box">
                                    <strong>Success!</strong> If you see version numbers, you're ready to start writing SQL!
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Your First SQL Commands</h3>
                        <p>Let's create a simple database and table:</p>
                        <div class="code-block">
                            -- Create a table for storing user information<br>
                            CREATE TABLE users (<br>
                            &nbsp;&nbsp;id INTEGER PRIMARY KEY AUTOINCREMENT,<br>
                            &nbsp;&nbsp;username TEXT NOT NULL UNIQUE,<br>
                            &nbsp;&nbsp;email TEXT NOT NULL,<br>
                            &nbsp;&nbsp;created_at DATETIME DEFAULT CURRENT_TIMESTAMP<br>
                            );<br><br>
                            
                            -- Insert sample data<br>
                            INSERT INTO users (username, email) <br>
                            VALUES ('john_doe', 'john@example.com');<br><br>
                            
                            INSERT INTO users (username, email) <br>
                            VALUES ('jane_smith', 'jane@example.com');<br><br>
                            
                            -- Query all users<br>
                            SELECT * FROM users;<br><br>
                            
                            -- Query specific columns<br>
                            SELECT username, email FROM users;<br><br>
                            
                            -- Filter with WHERE clause<br>
                            SELECT * FROM users WHERE username = 'john_doe';
                        </div>
                        <div class="tip-box">
                            <strong>Pro Tip:</strong> Always end SQL statements with a semicolon (;). SQL is case-insensitive, but it's convention to write keywords in UPPERCASE and table/column names in lowercase.
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 2: SQL Fundamentals -->
            <div class="card">
                <div class="card-header">
                    <h2>📚 SQL Fundamentals</h2>
                </div>
                <div class="card-body">
                    <div class="section">
                        <h3>CRUD Operations</h3>
                        <p>The four basic operations for persistent storage:</p>
                        
                        <h4 style="color: #4a6491; margin-top: 15px;">CREATE (Insert)</h4>
                        <div class="code-block">
                            -- Single row insert<br>
                            INSERT INTO products (name, price, stock)<br>
                            VALUES ('Laptop', 999.99, 50);<br><br>
                            
                            -- Multiple rows insert<br>
                            INSERT INTO products (name, price, stock) VALUES<br>
                            &nbsp;&nbsp;('Mouse', 29.99, 200),<br>
                            &nbsp;&nbsp;('Keyboard', 79.99, 150),<br>
                            &nbsp;&nbsp;('Monitor', 299.99, 75);
                        </div>
                        
                        <h4 style="color: #4a6491; margin-top: 15px;">READ (Select)</h4>
                        <div class="code-block">
                            -- Select all columns<br>
                            SELECT * FROM products;<br><br>
                            
                            -- Select specific columns<br>
                            SELECT name, price FROM products;<br><br>
                            
                            -- Filter with WHERE<br>
                            SELECT * FROM products WHERE price > 50;<br><br>
                            
                            -- Sort results<br>
                            SELECT * FROM products ORDER BY price DESC;<br><br>
                            
                            -- Limit results<br>
                            SELECT * FROM products LIMIT 10;
                        </div>
                        
                        <h4 style="color: #4a6491; margin-top: 15px;">UPDATE (Modify)</h4>
                        <div class="code-block">
                            -- Update specific row(s)<br>
                            UPDATE products <br>
                            SET price = 89.99, stock = 180<br>
                            WHERE name = 'Keyboard';<br><br>
                            
                            -- Update multiple rows<br>
                            UPDATE products <br>
                            SET stock = stock + 50<br>
                            WHERE stock < 100;
                        </div>
                        <div class="warning-box">
                            <strong>Warning:</strong> Always use WHERE with UPDATE! Without it, you'll update EVERY row in the table.
                        </div>
                        
                        <h4 style="color: #4a6491; margin-top: 15px;">DELETE (Remove)</h4>
                        <div class="code-block">
                            -- Delete specific row(s)<br>
                            DELETE FROM products <br>
                            WHERE name = 'Old Product';<br><br>
                            
                            -- Delete with conditions<br>
                            DELETE FROM products <br>
                            WHERE stock = 0 AND price < 10;
                        </div>
                        <div class="warning-box">
                            <strong>Danger:</strong> DELETE without WHERE will remove ALL rows! Use with extreme caution.
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Essential Clauses</h3>
                        <div class="code-block">
                            -- WHERE: Filter rows<br>
                            SELECT * FROM orders WHERE status = 'completed';<br><br>
                            
                            -- ORDER BY: Sort results<br>
                            SELECT * FROM orders ORDER BY order_date DESC;<br><br>
                            
                            -- LIMIT: Restrict number of results<br>
                            SELECT * FROM orders LIMIT 10 OFFSET 20;<br><br>
                            
                            -- DISTINCT: Remove duplicates<br>
                            SELECT DISTINCT country FROM customers;<br><br>
                            
                            -- GROUP BY: Aggregate data<br>
                            SELECT country, COUNT(*) as customer_count<br>
                            FROM customers<br>
                            GROUP BY country;<br><br>
                            
                            -- HAVING: Filter groups (after GROUP BY)<br>
                            SELECT country, COUNT(*) as count<br>
                            FROM customers<br>
                            GROUP BY country<br>
                            HAVING count > 10;
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Operators & Conditions</h3>
                        <div class="code-block">
                            -- Comparison operators<br>
                            SELECT * FROM products WHERE price >= 100;<br>
                            SELECT * FROM products WHERE stock != 0;<br><br>
                            
                            -- BETWEEN<br>
                            SELECT * FROM products WHERE price BETWEEN 50 AND 200;<br><br>
                            
                            -- IN (list of values)<br>
                            SELECT * FROM orders WHERE status IN ('pending', 'processing');<br><br>
                            
                            -- LIKE (pattern matching)<br>
                            SELECT * FROM customers WHERE email LIKE '%@gmail.com';<br>
                            SELECT * FROM products WHERE name LIKE 'Lap%';<br><br>
                            
                            -- IS NULL / IS NOT NULL<br>
                            SELECT * FROM orders WHERE shipped_date IS NULL;<br><br>
                            
                            -- AND, OR, NOT<br>
                            SELECT * FROM products <br>
                            WHERE (price > 100 OR stock > 50) AND name LIKE 'A%';
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Aggregate Functions</h3>
                        <div class="tools-grid">
                            <div class="tool-item">
                                <h4>COUNT()</h4>
                                <p>Count rows or non-null values</p>
                            </div>
                            <div class="tool-item">
                                <h4>SUM()</h4>
                                <p>Sum numeric values</p>
                            </div>
                            <div class="tool-item">
                                <h4>AVG()</h4>
                                <p>Calculate average</p>
                            </div>
                            <div class="tool-item">
                                <h4>MAX()</h4>
                                <p>Find maximum value</p>
                            </div>
                            <div class="tool-item">
                                <h4>MIN()</h4>
                                <p>Find minimum value</p>
                            </div>
                            <div class="tool-item">
                                <h4>GROUP_CONCAT()</h4>
                                <p>Concatenate values</p>
                            </div>
                        </div>
                        <div class="code-block">
                            -- Count total products<br>
                            SELECT COUNT(*) FROM products;<br><br>
                            
                            -- Sum of all prices<br>
                            SELECT SUM(price) as total_value FROM products;<br><br>
                            
                            -- Average price<br>
                            SELECT AVG(price) as avg_price FROM products;<br><br>
                            
                            -- Most expensive product<br>
                            SELECT MAX(price) FROM products;<br><br>
                            
                            -- Multiple aggregates<br>
                            SELECT <br>
                            &nbsp;&nbsp;COUNT(*) as total_products,<br>
                            &nbsp;&nbsp;AVG(price) as avg_price,<br>
                            &nbsp;&nbsp;MAX(price) as max_price,<br>
                            &nbsp;&nbsp;MIN(price) as min_price<br>
                            FROM products;
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 3: Best Practices & Tips -->
            <div class="card">
                <div class="card-header">
                    <h2>💡 Best Practices & Pro Tips</h2>
                </div>
                <div class="card-body">
                    <div class="section">
                        <h3>Writing Clean SQL</h3>
                        <div class="tip-box">
                            <strong>1. Use Meaningful Names:</strong> Choose descriptive table and column names.
                        </div>
                        <div class="code-block">
                            -- Good ✓<br>
                            SELECT customer_name, order_total FROM customer_orders;<br><br>
                            
                            -- Bad ✗<br>
                            SELECT cn, ot FROM co;
                        </div>
                        
                        <div class="tip-box">
                            <strong>2. Format for Readability:</strong> Use indentation and line breaks.
                        </div>
                        <div class="code-block">
                            -- Good ✓<br>
                            SELECT <br>
                            &nbsp;&nbsp;c.name,<br>
                            &nbsp;&nbsp;o.order_date,<br>
                            &nbsp;&nbsp;o.total<br>
                            FROM customers c<br>
                            JOIN orders o ON c.id = o.customer_id<br>
                            WHERE o.total > 100<br>
                            ORDER BY o.order_date DESC;<br><br>
                            
                            -- Bad ✗<br>
                            SELECT c.name,o.order_date,o.total FROM customers c JOIN orders o ON c.id=o.customer_id WHERE o.total>100 ORDER BY o.order_date DESC;
                        </div>
                        
                        <div class="tip-box">
                            <strong>3. Always Use WHERE with UPDATE/DELETE:</strong> Prevent accidental data loss.
                        </div>
                        
                        <div class="tip-box">
                            <strong>4. Specify Column Names in INSERT:</strong> Makes queries more maintainable.
                        </div>
                        <div class="code-block">
                            -- Good ✓<br>
                            INSERT INTO users (username, email) <br>
                            VALUES ('john', 'john@example.com');<br><br>
                            
                            -- Risky ✗<br>
                            INSERT INTO users VALUES ('john', 'john@example.com');
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Performance Tips</h3>
                        <div class="success-box">
                            <strong>Index Columns:</strong> Create indexes on columns used in WHERE, JOIN, and ORDER BY clauses.
                        </div>
                        <div class="code-block">
                            -- Create index for faster queries<br>
                            CREATE INDEX idx_customer_email ON customers(email);<br>
                            CREATE INDEX idx_order_date ON orders(order_date);
                        </div>
                        
                        <div class="success-box">
                            <strong>Avoid SELECT *:</strong> Only select columns you need.
                        </div>
                        <div class="code-block">
                            -- Better performance ✓<br>
                            SELECT id, name, email FROM users;<br><br>
                            
                            -- Slower ✗<br>
                            SELECT * FROM users;
                        </div>
                        
                        <div class="success-box">
                            <strong>Use LIMIT:</strong> Especially when testing queries on large tables.
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Common Mistakes to Avoid</h3>
                        <div class="warning-box">
                            <strong>Forgetting WHERE in UPDATE/DELETE:</strong> This will affect ALL rows!
                        </div>
                        <div class="warning-box">
                            <strong>Case Sensitivity:</strong> Some databases (PostgreSQL) are case-sensitive for identifiers.
                        </div>
                        <div class="warning-box">
                            <strong>NULL Comparisons:</strong> Use IS NULL, not = NULL
                        </div>
                        <div class="code-block">
                            -- Wrong ✗<br>
                            SELECT * FROM orders WHERE shipped_date = NULL;<br><br>
                            
                            -- Correct ✓<br>
                            SELECT * FROM orders WHERE shipped_date IS NULL;
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Practice Resources</h3>
                        <p>Master SQL through hands-on practice:</p>
                        <div class="tools-grid">
                            <div class="tool-item">
                                <h4>SQLBolt</h4>
                                <p>Interactive tutorials - Start here!</p>
                            </div>
                            <div class="tool-item">
                                <h4>LeetCode</h4>
                                <p>Database problems (Easy → Hard)</p>
                            </div>
                            <div class="tool-item">
                                <h4>HackerRank</h4>
                                <p>SQL challenges with badges</p>
                            </div>
                            <div class="tool-item">
                                <h4>Mode Analytics</h4>
                                <p>Real-world datasets</p>
                            </div>
                            <div class="tool-item">
                                <h4>SQLZoo</h4>
                                <p>Tutorial with immediate feedback</p>
                            </div>
                            <div class="tool-item">
                                <h4>W3Schools</h4>
                                <p>Quick reference + try editor</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Learning Roadmap</h3>
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Week 1-2: Fundamentals</h4>
                                <p>Master SELECT, WHERE, ORDER BY, LIMIT, basic functions</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Week 3-4: Data Manipulation</h4>
                                <p>Learn INSERT, UPDATE, DELETE, and aggregate functions</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Week 5-6: Joins & Relationships</h4>
                                <p>Understand INNER JOIN, LEFT JOIN, RIGHT JOIN, FULL JOIN</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Week 7-8: Advanced Concepts</h4>
                                <p>Subqueries, CTEs, window functions, transactions</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <h4>Week 9+: Optimization & Design</h4>
                                <p>Database design, indexing, query optimization, normalization</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>SQL Learning Helper © 2025 | Master the language of databases</p>
            <p style="margin-top: 10px; font-size: 0.8rem; opacity: 0.8;">Practice daily, build projects, and never stop learning! 🚀</p>
        </footer>
    </div>
    
    <script>
        let db;
        
        // Initialize SQL.js and create database
        async function initDB() {
            const SQL = await initSqlJs({
                locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}`
            });
            
            db = new SQL.Database();
            loadSampleData();
        }
        
        // Load sample employee data
        function loadSampleData() {
            // Create employees table
            db.run(`
                CREATE TABLE employees (
                    id INTEGER PRIMARY KEY,
                    name TEXT NOT NULL,
                    department TEXT NOT NULL,
                    position TEXT NOT NULL,
                    salary INTEGER NOT NULL,
                    hire_date DATE NOT NULL
                );
            `);
            
            // Insert 20 sample records
            const employees = [
                [1, 'John Smith', 'Engineering', 'Senior Developer', 85000, '2019-03-15'],
                [2, 'Sarah Johnson', 'Marketing', 'Marketing Manager', 72000, '2020-01-10'],
                [3, 'Michael Brown', 'Engineering', 'Junior Developer', 55000, '2021-06-20'],
                [4, 'Emily Davis', 'Sales', 'Sales Representative', 48000, '2020-09-12'],
                [5, 'David Wilson', 'Engineering', 'Tech Lead', 95000, '2018-05-22'],
                [6, 'Lisa Anderson', 'HR', 'HR Manager', 68000, '2019-11-08'],
                [7, 'James Martinez', 'Sales', 'Sales Manager', 78000, '2019-07-15'],
                [8, 'Jennifer Taylor', 'Engineering', 'Developer', 70000, '2020-04-18'],
                [9, 'Robert Thomas', 'Marketing', 'Content Writer', 52000, '2021-02-25'],
                [10, 'Maria Garcia', 'Finance', 'Accountant', 62000, '2020-08-30'],
                [11, 'William Rodriguez', 'Engineering', 'DevOps Engineer', 82000, '2019-12-05'],
                [12, 'Jessica Lee', 'Sales', 'Account Executive', 65000, '2021-03-14'],
                [13, 'Christopher White', 'Marketing', 'Social Media Manager', 58000, '2020-10-22'],
                [14, 'Amanda Harris', 'HR', 'Recruiter', 54000, '2021-01-18'],
                [15, 'Daniel Clark', 'Finance', 'Financial Analyst', 71000, '2019-09-07'],
                [16, 'Michelle Lewis', 'Engineering', 'QA Engineer', 67000, '2020-05-11'],
                [17, 'Matthew Walker', 'Sales', 'Business Development', 73000, '2019-04-29'],
                [18, 'Ashley Hall', 'Marketing', 'Brand Manager', 69000, '2020-11-16'],
                [19, 'Joshua Allen', 'Engineering', 'Senior Developer', 88000, '2018-08-20'],
                [20, 'Stephanie Young', 'Finance', 'Finance Manager', 92000, '2018-02-14']
            ];
            
            const stmt = db.prepare('INSERT INTO employees VALUES (?, ?, ?, ?, ?, ?)');
            employees.forEach(emp => stmt.run(emp));
            stmt.free();
        }
        
        // Handle .db file upload
        async function handleDBUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const uploadStatus = document.getElementById('uploadStatus');
            uploadStatus.innerHTML = '<div class="success-message">⏳ Loading database file...</div>';
            
            try {
                const arrayBuffer = await file.arrayBuffer();
                const uint8Array = new Uint8Array(arrayBuffer);
                
                const SQL = await initSqlJs({
                    locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}`
                });
                
                db = new SQL.Database(uint8Array);
                
                uploadStatus.innerHTML = `<div class="success-message">✅ Successfully loaded database: ${file.name}</div>`;
                updateDBInfo();
                
            } catch (error) {
                uploadStatus.innerHTML = `<div class="error-message">❌ Error loading database: ${error.message}</div>`;
            }
        }
        
        // Handle CSV file upload
        async function handleCSVUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const uploadStatus = document.getElementById('uploadStatus');
            const tableName = document.getElementById('csvTableName').value.trim() || 'csv_data';
            
            uploadStatus.innerHTML = '<div class="success-message">⏳ Parsing CSV file...</div>';
            
            Papa.parse(file, {
                header: true,
                dynamicTyping: true,
                skipEmptyLines: true,
                complete: function(results) {
                    try {
                        if (results.data.length === 0) {
                            uploadStatus.innerHTML = '<div class="error-message">❌ CSV file is empty!</div>';
                            return;
                        }
                        
                        // Get column names from CSV headers
                        const columns = results.meta.fields;
                        
                        // Drop table if exists and create new one
                        try {
                            db.run(`DROP TABLE IF EXISTS ${tableName}`);
                        } catch (e) {}
                        
                        // Create table with all columns as TEXT (safe approach)
                        const createTableSQL = `CREATE TABLE ${tableName} (${columns.map(col => `"${col}" TEXT`).join(', ')})`;
                        db.run(createTableSQL);
                        
                        // Insert data
                        const insertSQL = `INSERT INTO ${tableName} VALUES (${columns.map(() => '?').join(', ')})`;
                        const stmt = db.prepare(insertSQL);
                        
                        results.data.forEach(row => {
                            const values = columns.map(col => {
                                const val = row[col];
                                return val === null || val === undefined ? null : String(val);
                            });
                            stmt.run(values);
                        });
                        
                        stmt.free();
                        
                        uploadStatus.innerHTML = `<div class="success-message">✅ Successfully loaded CSV: ${file.name}<br>Table: ${tableName} | Rows: ${results.data.length} | Columns: ${columns.length}</div>`;
                        updateDBInfo();
                        
                    } catch (error) {
                        uploadStatus.innerHTML = `<div class="error-message">❌ Error creating table: ${error.message}</div>`;
                    }
                },
                error: function(error) {
                    uploadStatus.innerHTML = `<div class="error-message">❌ Error parsing CSV: ${error.message}</div>`;
                }
            });
        }
        
        // Reset to sample database
        async function resetToSampleDB() {
            const SQL = await initSqlJs({
                locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}`
            });
            
            db = new SQL.Database();
            loadSampleData();
            
            document.getElementById('uploadStatus').innerHTML = '<div class="success-message">✅ Reset to sample database!</div>';
            document.getElementById('dbInfo').innerHTML = `
                <strong>📊 Sample Database Loaded!</strong><br>
                Table: <code>employees</code><br>
                Columns: id, name, department, position, salary, hire_date<br>
                Records: 20 sample employees
            `;
            
            // Clear file inputs
            document.getElementById('dbFileInput').value = '';
            document.getElementById('csvFileInput').value = '';
        }
        
        // Update database info display
        function updateDBInfo() {
            try {
                const tables = db.exec("SELECT name FROM sqlite_master WHERE type='table'");
                
                if (tables.length === 0 || tables[0].values.length === 0) {
                    document.getElementById('dbInfo').innerHTML = '<strong>⚠️ No tables found in database</strong>';
                    return;
                }
                
                let info = '<strong>📊 Database Info:</strong><br>';
                
                tables[0].values.forEach(([tableName]) => {
                    const countResult = db.exec(`SELECT COUNT(*) FROM "${tableName}"`);
                    const count = countResult[0].values[0][0];
                    
                    const columnsResult = db.exec(`PRAGMA table_info("${tableName}")`);
                    const columns = columnsResult[0].values.map(row => row[1]).join(', ');
                    
                    info += `<br>Table: <code>${tableName}</code><br>`;
                    info += `Columns: ${columns}<br>`;
                    info += `Records: ${count}<br>`;
                });
                
                document.getElementById('dbInfo').innerHTML = info;
                
            } catch (error) {
                document.getElementById('dbInfo').innerHTML = `<strong>⚠️ Error reading database: ${error.message}</strong>`;
            }
        }
        
        // Show all tables in database
        function showTables() {
            try {
                const result = db.exec("SELECT name FROM sqlite_master WHERE type='table' ORDER BY name");
                
                if (result.length === 0 || result[0].values.length === 0) {
                    document.getElementById('resultContainer').innerHTML = '<div class="error-message">⚠️ No tables found in database</div>';
                    return;
                }
                
                const tables = result[0].values;
                let html = `
                    <div class="success-message">✅ Found ${tables.length} table(s) in database</div>
                    <table class="result-table">
                        <thead>
                            <tr>
                                <th>Table Name</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${tables.map(([tableName]) => `
                                <tr>
                                    <td><strong>${tableName}</strong></td>
                                    <td>
                                        <button class="btn" style="padding: 5px 15px; font-size: 0.85rem;" onclick="loadQuery('SELECT * FROM \\'${tableName}\\' LIMIT 10;')">View Data</button>
                                        <button class="btn" style="padding: 5px 15px; font-size: 0.85rem;" onclick="loadQuery('PRAGMA table_info(\\'${tableName}\\');')">Show Schema</button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                
                document.getElementById('resultContainer').innerHTML = html;
                
            } catch (error) {
                document.getElementById('resultContainer').innerHTML = `<div class="error-message">❌ Error: ${error.message}</div>`;
            }
        }
        
        // Load example query into textarea
        function loadQuery(query) {
            document.getElementById('sqlInput').value = query;
        }
        
        // Execute SQL query
        function executeSQL() {
            const query = document.getElementById('sqlInput').value.trim();
            const resultContainer = document.getElementById('resultContainer');
            
            if (!query) {
                resultContainer.innerHTML = '<div class="error-message">⚠️ Please enter a SQL query!</div>';
                return;
            }
            
            try {
                const result = db.exec(query);
                
                if (result.length === 0) {
                    // Query executed but no results (like INSERT, UPDATE, DELETE)
                    resultContainer.innerHTML = '<div class="success-message">✅ Query executed successfully! No rows returned.</div>';
                    return;
                }
                
                // Display results in a table
                const columns = result[0].columns;
                const values = result[0].values;
                
                let html = `
                    <div class="success-message">✅ Query executed successfully! Found ${values.length} row(s).</div>
                    <table class="result-table">
                        <thead>
                            <tr>
                                ${columns.map(col => `<th>${col}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${values.map(row => `
                                <tr>
                                    ${row.map(cell => `<td>${cell !== null ? cell : 'NULL'}</td>`).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                
                resultContainer.innerHTML = html;
                
            } catch (error) {
                resultContainer.innerHTML = `<div class="error-message">❌ Error: ${error.message}</div>`;
            }
        }
        
        // Allow Enter key to execute (Ctrl+Enter or Cmd+Enter)
        document.addEventListener('DOMContentLoaded', function() {
            initDB();
            
            document.getElementById('sqlInput').addEventListener('keydown', function(e) {
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    executeSQL();
                }
            });
        });
    </script>
</body>

</html>

